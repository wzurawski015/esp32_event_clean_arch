menu "Core EV (event bus)"

config CORE_EV_MAX_SUBS
    int "Max number of event subscribers"
    range 1 64
    default 12
    help
      Maksymalna liczba subskrybentów event-busa.

config CORE_EV_SCHEMA_GUARD
    bool "Schema guard in ev_post*() (fail-fast on contract violation)"
    default y
    help
      Gdy włączone, ev_post()/ev_post_lease()/ev_post_from_isr() walidują
      publikowane zdarzenia względem schemy (kind, itp).
      Naruszenie kontraktu kończy się fail-fast (abort()).
      Wyłącz w buildach produkcyjnych, jeśli chcesz zero narzutu / bez abortów.

config CORE_EV_SCHEMA_SELFTEST_ON_BOOT
    bool "Run schema self-test once at ev_init()"
    default y if CORE_EV_SCHEMA_GUARD
    default n
    help
      PR2.9: Przy pierwszym wywołaniu ev_init() wykonywany jest self-test schemy:
        - duplikaty (src, code)
        - duplikaty name
        - puste name
        - niepoprawny kind
        - brak doc dla zdarzeń krytycznych (heurystyka jak w 'evstat check')
      Wykrycie problemu kończy się fail-fast (abort()).
      Opcja developerska/warsztatowa — w produkcji zwykle wyłącz.

endmenu
